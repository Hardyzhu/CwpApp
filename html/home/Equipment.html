<!--
	作者：yeshengqiang
	时间：2016-06-24
	描述：首页主窗口
-->
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>智慧园区</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../../css/common.css"/>
		<link rel="stylesheet" href="../../css/home.css" />
		<link rel="stylesheet" href="../../css/add.css" />
		<link rel="stylesheet" href="../../css/new.css" />
		<link rel="stylesheet" href="../../fonts/iconfont.css">
		<style>
			.isActive{
				background:#90c31c !important;
			}
			.f1{
				text-align: center;
				font-size: 14px;
			}
			.subClassif{
				border-right:1px solid #DEDEDE;
			}
		</style>
	</head>
	<body class='has-footer'>
		<header class="mui-bar mui-bar-nav topColor">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">设备监控</h1>
		</header>
		<!--按钮-->
		<div id="progress-btn" class="table-bar-btn clearfix">
			<span style="height:80px">				
				<!--<a href="javascript:void(0)" data-state="1" class="isActive">
					<i class="icon iconfont">&#xe620;</i>
					<span>未处理</span>
				</a>-->
			</span>
			<!--<span style="height:80px">
				<a href="javascript:void(0)" data-state="3">
					<i class="icon iconfont">&#xe61f;</i>
					<span>已处理</span>
				</a>
			</span>-->
		</div>
		
		<!--内容-->
		<div class="mui-col-xs-12 facility">
			设备
		</div>
		<div class="mui-col-xs-12 mui-text-center clearfix classify">
			<div data-url="air_condition.html" class="mui-col-xs-3 fl subClassify tabList">
				<div class="mui-col-xs-12 fl">
					<div class="mui-col-xs-12 fl">
						<img src="../../image/icon-1.png" width="50" alt="空调" />
					</div>
					<div class="mui-col-xs-12 fl">
						<span>空调</span>
					</div>
				</div>
			</div>
			<div data-url="fresh_air.html" class="mui-col-xs-3 fl subClassify tabList">
				<div class="mui-col-xs-12 fl">
					<div class="mui-col-xs-12 fl">
						<img src="../../image/icon-2.png" width="50" alt="新风" />
					</div>
					<div class="mui-col-xs-12 fl">
						<span>新风</span>
					</div>
				</div>
			</div>
			<div data-url="sewage.html" class="mui-col-xs-3 fl subClassif tabList">
				<div class="mui-col-xs-12 fl">
					<div class="mui-col-xs-12 fl">
						<img src="../../image/icon-3.png" width="50" alt="排污泵" />
					</div>
					<div class="mui-col-xs-12 fl">
						<span>排污泵</span>
					</div>
				</div>
			</div>
			<div data-url="lighting.html" class="mui-col-xs-3 fl subClassify tabList">
				<div class="mui-col-xs-12 fl">
					<div class="mui-col-xs-12 fl">
						<img src="../../image/icon-4.png" width="50" alt="智能照明" />
					</div>
					<div class="mui-col-xs-12 fl">
						<span>智能照明</span>
					</div>
				</div>
			</div>
			<div data-url="monitoring.html" class="mui-col-xs-3 fl subClassify tabList">
				<div class="mui-col-xs-12 fl">
					<div class="mui-col-xs-12 fl">
						<img src="../../image/icon-5.png" width="50" alt="视频监控" />
					</div>
					<div class="mui-col-xs-12 fl">
						<span>视频监控</span>
					</div>
				</div>
			</div>
			<div data-url="guard.html" class="mui-col-xs-3 fl subClassif tabList">
				<div class="mui-col-xs-12 fl">
					<div class="mui-col-xs-12 fl">
						<img src="../../image/icn-6.png" width="50" alt="门禁" />
					</div>
					<div class="mui-col-xs-12 fl">
						<span>门禁</span>
					</div>
				</div>
			</div>
		</div>
		<script src="../../js/mui.min.js"></script>
		<script src="../../js/echarts-all.js"></script>
		<script src="../../js/mui.conf.js"></script>
		<script type="text/javascript" charset="utf-8">
			mui.init();
			mui.plusReady(function() {
				gotoDetail();   //跳转
			});
			//未处理已处理限制
			var now = 0;
			mui('#progress-btn a').each(function(index) { 
				var _this = this;
				_this.setAttribute('index',index);
				_this.addEventListener('tap', function(event) {
					var bList = document.querySelectorAll('#progress-btn a');
					if(now == this.getAttribute('index'))return;
					now = this.getAttribute('index');
					for(var i = 0;i<bList.length;i++){
						bList[i].classList.remove('isActive');
					}
					bList[now].classList.add('isActive');
				});
			});
			
			function getState(){
				var bdata;
				mui('#progress-btn a').each(function() { 
					var state = this.classList.contains('isActive') ? true : false;
					if(state){
						bdata = this.getAttribute('data-state');
					}
				});
				if(bdata!=undefined){
					return bdata;
				}else{
					return -1;
				}
			}
			//跳转
			function gotoDetail() {
				var list = document.getElementsByClassName("tabList");
				var EquipmentUrl = "";
				for (var i = 0, len = list.length; i < len; i++) {
					list[i].addEventListener("tap", function() {
//						var state = getState();
//						if(state==-1){
//							mui.toast('请选择处理状态！');
//							return;
//						}
						EquipmentUrl = this.getAttribute("data-url");
						if(EquipmentUrl=='lighting.html'||EquipmentUrl=='monitoring.html'){
							mui.toast('此功能正在开发中....');
							return
						}
						mui.openWindow({
							url: "../equipment/"+EquipmentUrl,
							id: EquipmentUrl,
							waiting: {
								autoShow: false
							}
						});
					});
				}
			}
		</script>
	</body>
</html>
